{% load static %}
{% block content %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}RadioJugoso{% endblock %}</title>
    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/estilos.css' %}">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="shortcut icon" href="{% static 'img/favicon-32x32.png' %}" />
</head>
<body>
    <!--------Inicio de Barra de Navegacion(Menu)--------->
    <header class="p-1 text-bg-dark">
        <div class="container">
          <div
            class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"
          >
            <ul
              class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 menux"
            >
              <li>
                <a href="{% url 'index' %}" class="nav-link px-2 text-white menux">Inicio</a>
              </li>
              <li><a href="{% url 'noticias' %}" class="nav-link px-2 text-white">noticias</a></li>
              <li>
                <a href="{% url 'galeria' %}" class="nav-link px-2 text-white">galeria</a>
              </li>
              <li>
                <a href="{% url 'tienda' %}" class="nav-link px-2 text-white">Tienda</a>
              </li>
              <li>
                <a href="{% url 'contacto' %}" class="nav-link px-2 text-white"
                  >Contacto</a
                >
              </li>

              <li>
                {% if user.is_staff %}
  <a href="{% url 'lista_usuarios' %}" class="btn btn-primary">Gestionar Usuarios</a>
  {% endif %}
              </li>
            </ul>
    
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
              <input
                type="search"
                class="form-control form-control-dark text-bg-dark"
                placeholder="Buscar..."
                aria-label="Buscar"
              />
            </form>
    
            <div class="text-end">
              {% if user.is_authenticated %}
                  <p class="text-white">Bienvenido, {{ user.username }}</p>
                  <a href="{% url 'logout' %}" class="btn btn-outline-light me-2">Cerrar sesión</a>
              {% else %}
                  <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;" type="button"  class="btn btn-outline-light me-1">
                      Iniciar sesión
                  </button>
                  <button onclick="window.location.href='{% url 'registro' %}'" type="button" class="btn btn-warning"  style="width:auto;">
                      Registrarse
                  </button>
              {% endif %}
          </div>
          
          <div id="id01" class="modal">
              <form class="modal-content animate" action="{% url 'login' %}" method="post">
                  {% csrf_token %}
                  <div class="imgcontainer">
                      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Cerrar Modal">&times;</span>
                      <img src="{% static 'img/img_avatar2.png' %}" alt="Avatar" class="avatar">
                  </div>
              
                  <div class="container">
                      <label for="username"><b>Usuario</b></label>
                      <input type="text" placeholder="Ingrese su Usuario" name="username" id="username" required>
              
                      <label for="password"><b>Contraseña</b></label>
                      <input type="password" placeholder="Ingrese su Contraseña" name="password" id="password" required>
                          
                      <button type="submit">Iniciar Sesión</button>
                      <label>
                          <input type="checkbox" checked="checked" name="remember"> Recuérdame
                      </label>
                  </div>
              
                  <div class="container" style="background-color:#f1f1f1">
                      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancelar</button>
                      <span class="psw"><a href="#">¿Olvidaste tu Contraseña?</a></span>
                  </div>
              </form>
          </div>
          

            </div>
          </div>
        </div>
      </header>
<body>

<div id="myModal4" class="modal4" style="display: block;">
    <div class="modal-content4">
        <span class="close">&times;</span>
        <img src="{% static 'img/promocion 1.png' %}" alt="Bienvenido a nuestro sitio web">
    </div>
</div>

<div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active" data-bs-interval="2000">
            <img src="{% static 'img/slider1.jpg' %}" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item" data-bs-interval="2000">
            <img src="{% static 'img/slider2.jpg' %}" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
            <img src="{% static 'img/slider4.jpg' %}" class="d-block w-100" alt="...">
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="noticia col-md-8">
            <img src="{% static 'img/mark.jpg' %}" alt="Noticia Musical">
            <div>
                <h2><a href="https://cnnespanol.cnn.com/video/marc-anthony-album-estreno-orix/" target="_blank">Marc Anthony estrena nuevo álbum con varios ritmos latinos </a></h2>
                <p>El cantante estadounidense Marc Anthony estrena su nuevo álbum "Muevense", un recorrido de varios géneros musicales y donde figuran canciones como "Amarte a la antigua", "Si te enamoro" y "Ale Ale".</p>
            </div>
        </div>

        <div class="col-md-4" id="Lugar">
            <!-- Aquí se mostrará la información del clima -->
        </div>

        <div class="noticia col-md-8">
            <img src="{% static 'img/nicky.jpg' %}" alt="Noticia Musical">
            <div>
                <h2><a href="https://cnnespanol.cnn.com/video/nicky-jam-cangrinaje-trueno-showbiz/" target="_blank">Nicky Jam y Trueno regresan a los inicios del reguetón con "Cangrinaje" </a></h2>
                <p>Nicky Jam estrenó este jueves el tema "Cangrinaje" junto al cantante argentino Trueno, con el que utilizan sonidos que recuerdan el origen del reguetón.</p>
            </div>
        </div>

        <div class="noticia col-md-8">
            <img src="{% static 'img/taylor.jpg' %}" alt="Noticia Musical">
            <div>
                <h2><a href="https://cnnespanol.cnn.com/2024/04/18/filtraron-nuevo-album-taylor-swift-esto-sabemos-trax/" target="_blank">¿Filtraron el nuevo álbum de Taylor Swift? Esto es lo que sabemos </a></h2>
                <p>Un enlace de Google Drive que supuestamente contiene 17 pistas del esperado nuevo álbum de Swift, "The Tortured Poets Department" (TTPD), ha estado circulando en internet en los últimos días y la gente está enfadada, triste y feliz a partes iguales.</p>
            </div>
        </div>

        <div class="col-md-4" id="Clima">
            <!-- Aquí se mostrará la información del clima -->
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
  var modal = document.getElementById('myModal4');
  var span = document.getElementsByClassName('close')[0];

  window.onload = function() {
      modal.style.display = "block";
  }

  span.onclick = function() {
      modal.style.display = "none";
  }

  window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }
</script>

<div id="weather-container">
  <img id="weather-icon" src="" alt="Icono del clima">
  <div id="weather-info">
      <h2>Clima Actual</h2>
      <p id="weather-location"></p>
      <p id="weather-temp"></p>
      <p id="weather-condition"></p>
      <p id="weather-wind"></p>
      <p id="weather-pressure"></p>
      <p id="weather-humidity"></p>
  </div>
</div>

<button id="toggle-weather">Mostrar Clima</button>

<script>
  async function obtenerClima() {
      try {
          const response = await fetch('http://api.weatherapi.com/v1/current.json?key=945316d982ba404d8a2202405241605&q=chile&aqi=no');
          const data = await response.json();

          const currentWeather = data.current;
          const location = data.location;

          document.getElementById('weather-location').textContent = `Lugar: ${location.name}, ${location.country}`;
          document.getElementById('weather-temp').textContent = `Temperatura: ${currentWeather.temp_c}°C`;
          document.getElementById('weather-condition').textContent = `Condición: ${currentWeather.condition.text}`;
          document.getElementById('weather-wind').textContent = `Viento: ${currentWeather.wind_kph} km/h, ${currentWeather.wind_dir}`;
          document.getElementById('weather-pressure').textContent = `Presión: ${currentWeather.pressure_mb} mb`;
          document.getElementById('weather-humidity').textContent = `Humedad: ${currentWeather.humidity}%`;

          const iconoAnimado = document.getElementById('weather-icon');
          switch (currentWeather.condition.text.toLowerCase()) {
              case 'thunderstorm':
                  iconoAnimado.src = '{% static "img/thunder.svg" %}';
                  break;
              case 'drizzle':
                  iconoAnimado.src = '{% static "img/rainy-2.svg" %}';
                  break;
              case 'rain':
                  iconoAnimado.src = '{% static "img/rainy-7.svg" %}';
                  break;
              case 'snow':
                  iconoAnimado.src = '{% static "img/snowy-6.svg" %}';
                  break;
              case 'clear':
                  iconoAnimado.src = '{% static "img/day.svg" %}';
                  break;
              case 'atmosphere':
                  iconoAnimado.src = '{% static "img/weather.svg" %}';
                  break;
              case 'clouds':
                  iconoAnimado.src = '{% static "img/cloudy-day-1.svg" %}';
                  break;
              default:
                  iconoAnimado.src = '{% static "img/cloudy-day-1.svg" %}';
                  break;
          }

          document.getElementById('weather-container').classList.add('show');
      } catch (error) {
          console.error('Error fetching weather data:', error);
          document.getElementById('weather-container').innerHTML = "<p>Error al obtener los datos del clima. Por favor, inténtelo de nuevo más tarde.</p>";
      }
  }

  obtenerClima();

  document.getElementById('toggle-weather').addEventListener('click', function() {
      var weatherContainer = document.getElementById('weather-container');
      if (weatherContainer.classList.contains('show')) {
          weatherContainer.classList.remove('show');
          this.textContent = 'Mostrar Clima';
      } else {
          weatherContainer.classList.add('show');
          this.textContent = 'Ocultar Clima';
      }
  });
</script>
{% endblock %}

</body>
</html>
